(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"4gLr":function(t,e,i){"use strict";i.d(e,"a",function(){return c});var s=i("WQoS"),r=i("seTr");class a extends r.a{constructor(t,e,i,s,r,a,n=!0,o=!1){super(t,r,a,n),this.ctx=t,this.x=e,this.y=i,this.radius=s,this.colour=r,this.lineThickness=a,this.fill=n,this.changeOutlineColour=o}draw(){const t=this.ctx.strokeStyle;this.ctx.lineWidth=this.lineThickness,this.changeOutlineColour&&(this.ctx.strokeStyle=this.colour),this.ctx.beginPath(),this.ctx.arc(this.x+this.radius,this.y+this.radius,this.radius,0,2*Math.PI),this.ctxCommit(),this.ctx.strokeStyle=t}}const n="#000000",o=.5,h=Math.PI/3;class c extends a{constructor(t,e,i,r,a,n,o,h=!0){super(t,e,i,r,a,1,h,o===s.a.PARENT),this.ctx=t,this.x=e,this.y=i,this.radius=r,this.colour=a,this.infectedState=n,this.personType=o,this.fill=h}draw(){super.draw();const t=new a(this.ctx,this.x+1.4*this.radius,this.y+.5*this.radius,.1*this.radius,n,1),e=new a(this.ctx,this.x+.5*this.radius,this.y+.5*this.radius,.1*this.radius,n,1);this.ctx.beginPath(),this.ctx.lineWidth=1,this.infectedState!==s.c.UNINFECTED&&this.infectedState!==s.c.ASYMPTOMATIC||this.ctx.arc(this.x+this.radius,this.y+this.radius,o*this.radius,Math.PI/2-h,Math.PI/2+h),this.infectedState===s.c.INFECTED&&this.ctx.arc(this.x+this.radius,this.y+2*this.radius,o*this.radius,3*Math.PI/2-h,3*Math.PI/2+h),this.infectedState===s.c.RECOVERED&&(this.ctx.moveTo(this.x+(1-h*o)*this.radius,this.y+1.5*this.radius),this.ctx.lineTo(this.x+(1+h*o)*this.radius,this.y+1.5*this.radius));const i=this.ctx.strokeStyle;this.ctx.strokeStyle=n,this.ctx.stroke(),this.ctx.strokeStyle=i,t.draw(),e.draw()}}},Jhmx:function(t,e,i){"use strict";i.d(e,"b",function(){return r}),i.d(e,"a",function(){return h});var s=i("4gLr");const r=["#00ff00","#ff0000","#ff0000","#0000ff"],a=t=>r[t],n=(t,e)=>({size:Math.trunc(t/e),remainder:t-Math.trunc(t/e)*e});function o(t){let e=parseInt(t.slice(1),16);const i=5592405;for(let s=0;s<3;s++){const t=255<<8*s;(e&t)>=(i&t)&&(e-=i&t)}return"#"+e.toString(16).padStart(6,"0")}class h extends s.a{constructor(t,e,i,s,r,n,h,c){super(t,r||n?e.x:i.x,r||n?e.y:i.y,h,n?o(a(s)):a(s),s,c),this.ctx=t,this.home=e,this.work=i,this.infectedState=s}move({atHome:t,isolating:e,steps:i,infectedState:s}){const r=((t,e,i)=>({x:n(e.x-t.x,i),y:n(e.y-t.y,i)}))({x:this.x,y:this.y},t||e?this.home:this.work,i);return this.infectedState=s,this.colour=a(s),e&&(this.colour=o(this.colour)),()=>{this.x+=r.x.size,this.y+=r.y.size;for(const t of["x","y"])if(0!==r[t].remainder){const e=Math.sign(r[t].remainder);this[t]+=e,r[t].remainder-=e}}}}},Ks6N:function(t,e,i){"use strict";i.d(e,"a",function(){return n});var s=i("ofXK"),r=i("icpI"),a=i("fXoL");let n=(()=>{class t{}return t.\u0275mod=a.Kb({type:t}),t.\u0275inj=a.Jb({factory:function(e){return new(e||t)},imports:[[s.c,r.c]]}),t})()},W7qh:function(t,e,i){"use strict";i.d(e,"b",function(){return h}),i.d(e,"a",function(){return c});var s=i("icpI"),r=i("Jhmx"),a=i("WQoS"),n=i("fXoL");const o=["chart"];let h=(()=>{class t{constructor(){this.type=s.a.AreaChart,this.options={isStacked:!0,colors:[""],vAxis:{viewWindow:{min:0,max:1},title:"Number of People"},hAxis:{viewWindow:{min:0,max:1},gridlines:{interval:.5},title:"Day"},chartArea:{width:600},titleTextStyle:{fontSize:24,textAlign:"center"},animation:{duration:250,easing:"out",startup:!0},legend:{position:"none"}},this.dataReceived=!1}ngOnInit(){this.dataType===c.Infection?(this.columnNames=["Day",a.c[a.c.INFECTED],a.c[a.c.UNINFECTED],a.c[a.c.RECOVERED]],this.options.colors=[r.b[a.c.INFECTED],r.b[a.c.UNINFECTED],r.b[a.c.RECOVERED]],this.options.legend.position="none"):this.dataType===c.Quarantine&&(this.columnNames=["Day","Self-Isolating","Not Self-Isolating"],this.options.colors=["#FFA500","#EFFD5F"],this.options.legend.position="right",this.options.chartArea.width*=.9),this.day=this.data[this.data.length-1][0],this.addEvent.subscribe(t=>{this.dataReceived||(this.data=[],this.dataReceived=!0),t.forEach(t=>this.data.push(t)),this.day=t[0][0];const e=[this.columnNames];this.data.forEach(t=>e.push(t)),this.chart.chartWrapper.setDataTable(google.visualization.arrayToDataTable(e,!1)),this.updateAxis(),this.chart.chartWrapper.draw()}),this.updateAxis()}updateAxis(){this.data&&(this.options.vAxis.viewWindow={min:0,max:this.getNumPeople(0===this.data.length?[]:this.data[0])},this.options.hAxis.viewWindow={min:0,max:this.day})}getNumPeople(t){let e=0;for(let i=1;i<t.length;i++)e+=t[i];return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Gb({type:t,selectors:[["app-stackedgraph"]],viewQuery:function(t,e){if(1&t&&n.wc(o,1),2&t){let t;n.jc(t=n.Zb())&&(e.chart=t.first)}},inputs:{title:"title",dataType:"dataType",data:"data",width:"width",height:"height",addEvent:"addEvent"},decls:2,vars:7,consts:[[3,"title","type","columns","data","options","width","height"],["chart",""]],template:function(t,e){1&t&&n.Nb(0,"google-chart",0,1),2&t&&n.fc("title",e.title)("type",e.type)("columns",e.columnNames)("data",e.data)("options",e.options)("width",e.width)("height",e.height)},directives:[s.b],styles:[""]}),t})();var c=function(t){return t[t.Infection=0]="Infection",t[t.Quarantine=1]="Quarantine",t}({})},eqlV:function(t,e,i){"use strict";i.d(e,"a",function(){return a});var s=i("ofXK"),r=i("fXoL");let a=(()=>{class t{}return t.\u0275mod=r.Kb({type:t}),t.\u0275inj=r.Jb({factory:function(e){return new(e||t)},imports:[[s.c]]}),t})()},icpI:function(t,e,i){"use strict";i.d(e,"a",function(){return m}),i.d(e,"b",function(){return w}),i.d(e,"c",function(){return v});var s=i("XNiG"),r=i("HDdC"),a=i("LRne"),n=i("jtHE"),o=i("itXk"),h=i("xgIS"),c=i("fXoL"),l=i("eIep"),d=i("Kj3r");i("mrSG");const u=["*"],p=new c.r("GOOGLE_CHARTS_CONFIG"),g={version:"current",safeMode:!1};let f=(()=>{class t{constructor(t,e,i){this.zone=t,this.localeId=e,this.scriptSource="https://www.gstatic.com/charts/loader.js",this.scriptLoadSubject=new s.a,this.config=Object.assign(Object.assign({},g),i||{})}isGoogleChartsAvailable(){return"undefined"!=typeof google&&void 0!==google.charts}loadChartPackages(...t){return this.loadGoogleCharts().pipe(Object(l.a)(()=>new r.a(e=>{google.charts.load(this.config.version,{packages:t,language:this.localeId,mapsApiKey:this.config.mapsApiKey,safeMode:this.config.safeMode}),google.charts.setOnLoadCallback(()=>{this.zone.run(()=>{e.next(),e.complete()})})})))}loadGoogleCharts(){if(this.isGoogleChartsAvailable())return Object(a.a)(null);if(!this.isLoadingGoogleCharts()){const t=this.createGoogleChartsScript();t.onload=()=>{this.zone.run(()=>{this.scriptLoadSubject.next(),this.scriptLoadSubject.complete()})},t.onerror=()=>{this.zone.run(()=>{console.error("Failed to load the google charts script!"),this.scriptLoadSubject.error(new Error("Failed to load the google charts script!"))})}}return this.scriptLoadSubject.asObservable()}isLoadingGoogleCharts(){return null!=this.getGoogleChartsScript()}getGoogleChartsScript(){return Array.from(document.getElementsByTagName("script")).find(t=>t.src===this.scriptSource)}createGoogleChartsScript(){const t=document.createElement("script");return t.type="text/javascript",t.src=this.scriptSource,t.async=!0,document.getElementsByTagName("head")[0].appendChild(t),t}}return t.\u0275fac=function(e){return new(e||t)(c.Vb(c.A),c.Vb(c.v),c.Vb(p,8))},t.\u0275prov=c.Ib({token:t,factory:t.\u0275fac}),t})();var m=function(t){return t.AnnotationChart="AnnotationChart",t.AreaChart="AreaChart",t.Bar="Bar",t.BarChart="BarChart",t.BubbleChart="BubbleChart",t.Calendar="Calendar",t.CandlestickChart="CandlestickChart",t.ColumnChart="ColumnChart",t.ComboChart="ComboChart",t.PieChart="PieChart",t.Gantt="Gantt",t.Gauge="Gauge",t.GeoChart="GeoChart",t.Histogram="Histogram",t.Line="Line",t.LineChart="LineChart",t.Map="Map",t.OrgChart="OrgChart",t.Sankey="Sankey",t.Scatter="Scatter",t.ScatterChart="ScatterChart",t.SteppedAreaChart="SteppedAreaChart",t.Table="Table",t.Timeline="Timeline",t.TreeMap="TreeMap",t.WordTree="wordtree",t}({});let b=(()=>{class t{constructor(t){this.loaderService=t,this.error=new c.n,this.ready=new c.n,this.stateChange=new c.n,this.id="_"+Math.random().toString(36).substr(2,9),this.wrapperReadySubject=new n.a(1)}get wrapperReady$(){return this.wrapperReadySubject.asObservable()}get controlWrapper(){if(!this._controlWrapper)throw new Error("Cannot access the control wrapper before it being initialized.");return this._controlWrapper}ngOnInit(){this.loaderService.loadChartPackages("controls").subscribe(()=>{this.createControlWrapper()})}ngOnChanges(t){this._controlWrapper&&(t.type&&this._controlWrapper.setControlType(this.type),t.options&&this._controlWrapper.setOptions(this.options||{}),t.state&&this._controlWrapper.setState(this.state||{}))}createControlWrapper(){this._controlWrapper=new google.visualization.ControlWrapper({containerId:this.id,controlType:this.type,state:this.state,options:this.options}),this.addEventListeners(),this.wrapperReadySubject.next(this._controlWrapper)}addEventListeners(){google.visualization.events.removeAllListeners(this._controlWrapper),google.visualization.events.addListener(this._controlWrapper,"ready",t=>this.ready.emit(t)),google.visualization.events.addListener(this._controlWrapper,"error",t=>this.error.emit(t)),google.visualization.events.addListener(this._controlWrapper,"statechange",t=>this.stateChange.emit(t))}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(f))},t.\u0275cmp=c.Gb({type:t,selectors:[["control-wrapper"]],hostAttrs:[1,"control-wrapper"],hostVars:1,hostBindings:function(t,e){2&t&&c.Ub("id",e.id)},inputs:{for:"for",type:"type",options:"options",state:"state"},outputs:{error:"error",ready:"ready",stateChange:"stateChange"},exportAs:["controlWrapper"],features:[c.zb],decls:0,vars:0,template:function(t,e){},encapsulation:2,changeDetection:0}),t})(),y=(()=>{class t{constructor(t,e){this.element=t,this.loaderService=e,this.ready=new c.n,this.error=new c.n,this.initialized=!1}ngOnInit(){this.loaderService.loadChartPackages("controls").subscribe(()=>{this.createDataTable(),this.createDashboard(),this.initialized=!0})}ngOnChanges(t){this.initialized&&(t.data||t.columns)&&(this.createDataTable(),this.dashboard.draw(this.dataTable))}createDashboard(){const t=this.controlWrappers.map(t=>t.wrapperReady$),e=this.controlWrappers.map(t=>t.for).map(t=>Array.isArray(t)?Object(o.a)(t.map(t=>t.wrapperReady$)):t.wrapperReady$);Object(o.a)([...t,...e]).subscribe(()=>{this.dashboard=new google.visualization.Dashboard(this.element.nativeElement),this.initializeBindings(),this.registerEvents(),this.dashboard.draw(this.dataTable)})}registerEvents(){google.visualization.events.removeAllListeners(this.dashboard);const t=(t,e,i)=>{google.visualization.events.addListener(t,e,i)};t(this.dashboard,"ready",()=>this.ready.emit()),t(this.dashboard,"error",t=>this.error.emit(t))}initializeBindings(){this.controlWrappers.forEach(t=>{if(Array.isArray(t.for)){const e=t.for.map(t=>t.chartWrapper);this.dashboard.bind(t.controlWrapper,e)}else this.dashboard.bind(t.controlWrapper,t.for.chartWrapper)})}createDataTable(){if(null==this.data)return;let t=!0;null!=this.columns&&(t=!1),this.dataTable=google.visualization.arrayToDataTable(this.getDataAsTable(),t)}getDataAsTable(){return this.columns?[this.columns,...this.data]:this.data}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(c.l),c.Mb(f))},t.\u0275cmp=c.Gb({type:t,selectors:[["dashboard"]],contentQueries:function(t,e,i){if(1&t&&c.Fb(i,b,0),2&t){let t;c.jc(t=c.Zb())&&(e.controlWrappers=t)}},hostAttrs:[1,"dashboard"],inputs:{data:"data",columns:"columns"},outputs:{ready:"ready",error:"error"},exportAs:["dashboard"],features:[c.zb],ngContentSelectors:u,decls:1,vars:0,template:function(t,e){1&t&&(c.ec(),c.dc(0))},encapsulation:2,changeDetection:0}),t})(),w=(()=>{class t{constructor(t,e,i){this.element=t,this.scriptLoaderService=e,this.dashboard=i,this.options={},this.dynamicResize=!1,this.ready=new c.n,this.error=new c.n,this.select=new c.n,this.mouseover=new c.n,this.mouseleave=new c.n,this.wrapperReadySubject=new n.a(1),this.initialized=!1}get chart(){return this.chartWrapper.getChart()}get wrapperReady$(){return this.wrapperReadySubject.asObservable()}get chartWrapper(){if(!this.wrapper)throw new Error("Trying to access the chart wrapper before it was fully initialized");return this.wrapper}set chartWrapper(t){this.wrapper=t,this.drawChart()}ngOnInit(){this.scriptLoaderService.loadChartPackages().subscribe(()=>{this.createDataTable(),this.wrapper=new google.visualization.ChartWrapper({container:this.element.nativeElement,chartType:this.type,dataTable:this.dataTable,options:this.mergeOptions()}),this.registerChartEvents(),this.wrapperReadySubject.next(this.wrapper),this.initialized=!0,this.drawChart()})}ngOnChanges(t){if(t.dynamicResize&&this.updateResizeListener(),this.initialized){let e=!1;(t.data||t.columns||t.formatters)&&(this.createDataTable(),this.wrapper.setDataTable(this.dataTable),e=!0),t.type&&(this.wrapper.setChartType(this.type),e=!0),(t.options||t.width||t.height||t.title)&&(this.wrapper.setOptions(this.mergeOptions()),e=!0),e&&this.drawChart()}}createDataTable(){if(null==this.data)return void(this.dataTable=void 0);let t=!0;null!=this.columns&&(t=!1),this.dataTable=google.visualization.arrayToDataTable(this.getDataAsTable(),t),this.applyFormatters(this.dataTable)}getDataAsTable(){return this.columns?[this.columns,...this.data]:this.data}updateResizeListener(){null!=this.resizeSubscription&&(this.resizeSubscription.unsubscribe(),this.resizeSubscription=void 0),this.dynamicResize&&(this.resizeSubscription=Object(h.a)(window,"resize").pipe(Object(d.a)(100)).subscribe(()=>{this.initialized&&this.drawChart()}))}mergeOptions(){return Object.assign({title:this.title,width:this.width,height:this.height},this.options)}applyFormatters(t){if(null!=this.formatters)for(const e of this.formatters)e.formatter.format(t,e.colIndex)}registerChartEvents(){google.visualization.events.removeAllListeners(this.wrapper);const t=(t,e,i)=>{google.visualization.events.addListener(t,e,i)};t(this.wrapper,"ready",()=>{google.visualization.events.removeAllListeners(this.chart),t(this.chart,"onmouseover",t=>this.mouseover.emit(t)),t(this.chart,"onmouseout",t=>this.mouseleave.emit(t)),t(this.chart,"select",()=>{const t=this.chart.getSelection();this.select.emit({selection:t})}),this.ready.emit({chart:this.chart})}),t(this.wrapper,"error",t=>this.error.emit(t))}drawChart(){null==this.dashboard&&this.wrapper.draw()}}return t.\u0275fac=function(e){return new(e||t)(c.Mb(c.l),c.Mb(f),c.Mb(y,8))},t.\u0275cmp=c.Gb({type:t,selectors:[["google-chart"]],hostAttrs:[1,"google-chart"],inputs:{options:"options",dynamicResize:"dynamicResize",type:"type",data:"data",columns:"columns",title:"title",width:"width",height:"height",formatters:"formatters"},outputs:{ready:"ready",error:"error",select:"select",mouseover:"mouseover",mouseleave:"mouseleave"},exportAs:["googleChart"],features:[c.zb],decls:0,vars:0,template:function(t,e){},styles:["[_nghost-%COMP%] { width: fit-content; display: block; }"],changeDetection:0}),t})(),v=(()=>{class t{static forRoot(e={}){return{ngModule:t,providers:[{provide:p,useValue:e}]}}}return t.\u0275mod=c.Kb({type:t}),t.\u0275inj=c.Jb({factory:function(e){return new(e||t)},providers:[f]}),t})()},seTr:function(t,e,i){"use strict";i.d(e,"a",function(){return s});class s{constructor(t,e,i,s){this.ctx=t,this.colour=e,this.lineThickness=i,this.fill=s}ctxCommit(){const t=this.ctx.strokeStyle,e=this.ctx.lineWidth;if(this.ctx.lineWidth=this.lineThickness,this.ctx.strokeStyle="000000",this.ctx.stroke(),this.ctx.strokeStyle=t,this.ctx.lineWidth=e,this.fill){const t=this.ctx.fillStyle;this.ctx.fillStyle=this.colour,this.ctx.fill(),this.ctx.fillStyle=t}}}},"vl9/":function(t,e,i){"use strict";i.d(e,"a",function(){return h});var s=i("4gLr"),r=i("WQoS"),a=i("Jhmx"),n=i("fXoL");const o=["keyCanvas"];let h=(()=>{class t{constructor(){this.numStates=Object.values(r.c).length/2}get keyCanvas(){const t=this._keyCanvas;if(!t)throw new Error("keyCanvas not initialised.");return t}get ctx(){const t=this._ctx;if(!t)throw new Error("ctx not initialised");return t}get canvasWidth(){const t=this.keyCanvas;if(t)return t.nativeElement.width;throw new Error("Can't get canvas width as canvas doesn't exist.")}get canvasHeight(){const t=this.keyCanvas;if(t)return t.nativeElement.height;throw new Error("Can't get canvas width as canvas doesn't exist.")}draw(){const t=(this.canvasWidth/this.numStates-20)/2;this.ctx.textAlign="center";for(let e=0;e<this.numStates;e++){const i=5+(2*t+20)*e,n=Object.values(r.c)[e],o=Object.values(r.c).indexOf(n);new s.a(this.ctx,i,5,t,a.b[e],o,r.a.PARENT).draw(),this.ctx.fillText(r.c[o],i+t,2*t+20)}}ngOnInit(){const t=this.keyCanvas;t.nativeElement.height=t.nativeElement.clientHeight,t.nativeElement.width=t.nativeElement.clientWidth;const e=t.nativeElement.getContext("2d");if(!e)throw new Error("2d canvas not supported.");this._ctx=e,this.draw()}range(t){const e=[];for(let i=0;i<t;i++)e.push(i);return e}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Gb({type:t,selectors:[["app-colour-key"]],viewQuery:function(t,e){if(1&t&&n.wc(o,3),2&t){let t;n.jc(t=n.Zb())&&(e._keyCanvas=t.first)}},decls:2,vars:0,consts:[["keyCanvas",""]],template:function(t,e){1&t&&n.Nb(0,"canvas",null,0)},styles:[""]}),t})()}}]);